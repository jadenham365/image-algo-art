<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="utf-8">
		<title>Imerge</title>
	</head>
	<body>
		<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
  /* global nn */
  
  let canvas, ctx
  let palette = []
  
  function choosePalette () {
    
    for (let i = 0; i < 8; i++) {
      let r = Math.round(Math.random() * 255)
      let g = Math.round(Math.random() * 255)
      let b = Math.round(Math.random() * 255)
      let colorString = `rgb(${r}, ${g}, ${b})`
      palette.push(colorString)
    }
    
    console.log(palette)
  }


  function setup () {
    nn.get('body').css({ margin: '0', height: '100vh' })
    canvas = nn.create('canvas').addTo('body')
    canvas.width = nn.width // match the window's width
    canvas.height = nn.height // match the window's height
    ctx = canvas.getContext('2d')
    choosePalette()
  }
  
  function draw () {
    requestAnimationFrame(draw)
    for (let i = 0; i < 8; i++) {
      ctx.fillStyle = palette[i]
      let x
      let y
      if (i < 4) {
        x = canvas.width * (i / 4)
        y = 0
      } else {
        x = canvas.width * ((i - 4) / 4)
        y = canvas.height / 2
      }
      let width = canvas.width / 4
      let height = canvas.height / 2
      ctx.fillRect(x, y, width, height)
    }
    
  }
  
  nn.on('load', setup)
  nn.on('load', draw)
  
</script>
	</body>
</html>
